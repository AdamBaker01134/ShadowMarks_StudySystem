<script src="/my_task/p5.min.js"></script>
<script src="/my_task/model.js"></script>
<script src="/my_task/controller.js"></script>
<script src="/my_task/view.js"></script>
<script src="/my_task/video.js"></script>
<script type="text/javascript">
    const pID = "{{ pID }}";
    const interaction = "{{ interaction }}";
    const task = "{{ task }}";
    const tutorial = "{{ tutorial }}" === "True" ? true : false;

    const assets = {
        baseball: {
            path: "{{url_for('my_task.static', filename = 'assets/baseball')}}",
            categories: [
                {
                    name: "busch_stadium",
                    frames: 150,
                    videos: [{ name: "griffin_jax", dist: 0.1196 }, { name: "michael_fulmer", dist: 0.0695 }, { name: "michael_king", dist: 0.0918 }, { name: "shohei_ohtani", dist: 0.0389 }, { name: "sonny_gray", dist: 0.0876 }, { name: "yency_almonte", dist: 0.0653 },],
                },
                {
                    name: "dodgers_stadium",
                    frames: 150,
                    videos: [{ name: "gavin_stone", dist: 0.0510 }, { name: "george_soriano", dist: 0.0318 }, { name: "tyler_glasnow", dist: 0.0500 }, { name: "ronel_blanco", dist: 0.0973 }, { name: "seranthony_dominguez", dist: 0.0487 }, { name: "yunior_marte", dist: 0.0403 },],
                },
                {
                    name: "oriole_park",
                    frames: 150,
                    videos: [{ name: "corbin_burnes", dist: 0.0709 }, { name: "duane_underwood_jr", dist: 0.0737 }, { name: "john_schreiber", dist: 0.0987 }, { name: "mitch_keller", dist: 0.0306 }, { name: "shohei_ohtani", dist: 0.0806 }, { name: "zach_eflin", dist: 0.0473 },],
                },
                {
                    name: "rogers_centre",
                    frames: 150,
                    videos: [{ name: "bryse_wilson", dist: 0.0653 }, { name: "dean_kremer", dist: 0.0528 }, { name: "felix_bautista", dist: 0.1390 }, { name: "jhony_brito", dist: 0.0667 }, { name: "mitch_white", dist: 0.1126 }, { name: "spencer_strider", dist: 0.0876},],
                },
                {
                    name: "wrigley_field",
                    frames: 150,
                    videos: [{ name: "aaron_civale", dist: 0.1279 }, { name: "edward_cabrera", dist: 0.0848 }, { name: "james_naile", dist: 0.0514 }, { name: "logan_webb", dist: 0.0695 }, { name: "miles_mikolas", dist: 0.0473 }, { name: "yoshinobu_yamimoto", dist: 0.1029 },],
                },
                {
                    name: "yankee_stadium",
                    frames: 150,
                    videos: [{ name: "bryan_woo", dist: 0.0491 }, { name: "eli_morgan", dist: 0.1140 }, { name: "rico_garcia", dist: 0.0545 }, { name: "shane_bieber", dist: 0.0323}, { name: "joe_boyle", dist: 0.0856 }, { name: "yennier_cano", dist: 0.0467},],
                },
            ],
        },
        lemnatec: {
            path: "{{url_for('my_task.static', filename = 'assets/lemnatec')}}",
            categories: [
                // Measured areas by ellipsed convex hull
                // {
                //     name: "canna",
                //     frames: ["2019-07-03","2019-07-04","2019-07-05","2019-07-06","2019-07-07","2019-07-08","2019-07-11","2019-07-13","2019-07-14","2019-07-15","2019-07-17","2019-07-19","2019-07-21","2019-07-23","2019-07-25","2019-07-27","2019-07-29","2019-07-31","2019-08-02","2019-08-04","2019-08-06","2019-08-08","2019-08-10","2019-08-12","2019-08-14","2019-08-16","2019-08-18","2019-08-20","2019-08-22","2019-08-24","2019-08-26","2019-08-28","2019-08-30","2019-09-01","2019-09-03"],
                //     example_area: 0.3906,
                //     videos: [{ name: "canna1", dist: 0.7095, area: 0.3526, dist_flower: 0.6823 }, { name: "canna2", dist: 0.7169, area: 0.3660, dist_flower: 0.6452 }, { name: "canna3", dist: 0.6848, area: 0.3443, dist_flower: 0.5587 }, { name: "canna4", dist: 0.6774, area: 0.2972, dist_flower: 0.6007 }, { name: "canna5", dist: 0.7342, area: 0.2708, dist_flower: 0.6502 }, { name: "canna6", dist: 0.7441, area: 0.3337, dist_flower: 0.6749 }, { name: "canna7", dist: 0.7540, area: 0.3908, dist_flower: 0.6098 }, { name: "canna8", dist: 0.7787, area: 0.4067, dist_flower: 0.6593 }, { name: "canna9", dist: 0.7095, area: 0.3251, dist_flower: 0.6483 }, { name: "canna10", dist: 0.6749, area: 0.3013, dist_flower: 0.5686 }, { name: "canna11", dist: 0.7886, area: 0.4960, dist_flower: 0.6675 }, { name: "canna12", dist: 0.7738, area: 0.3800, dist_flower: 0.6977 }, { name: "canna13", dist: 0.8183, area: 0.4321, dist_flower: 0.6785 }, { name: "canna14", dist: 0.8282, area: 0.4132, dist_flower: 0.6895 }, { name: "canna15", dist: 0.8158, area: 0.4656, dist_flower: 0.6977 }, { name: "canna16", dist: 0.7244, area: 0.3628, dist_flower: 0.5768 }, { name: "canna17", dist: 0.6131, area: 0.3249, dist_flower: 0.5356 }, { name: "canna18", dist: 0.6774, area: 0.3366, dist_flower: 0.5768 }, { name: "canna19", dist: 0.6947, area: 0.3263, dist_flower: 0.5411 }, { name: "canna20", dist: 0.7664, area: 0.4657, dist_flower: 0.6098 },],
                // },
                // {
                //     name: "coleus",
                //     example_area: 0.3629,
                //     frames: ["2019-07-13","2019-07-14","2019-07-15","2019-07-17","2019-07-19","2019-07-21","2019-07-23","2019-07-27","2019-08-02","2019-08-04","2019-08-06","2019-08-08","2019-08-10","2019-08-12","2019-08-16","2019-08-18","2019-08-20","2019-08-22","2019-08-24","2019-08-26","2019-08-28","2019-08-30","2019-09-01","2019-09-03"],
                //     videos: [{ name: "coleus1", dist: 0.8269, area: 0.3278, dist_flower: 0.4289 }, { name: "coleus2", dist: 0.8195, area: 0.1174, dist_flower: 0.4017 }, { name: "coleus3", dist: 0.7874, area: 0.1861, dist_flower: 0.4462 }, { name: "coleus4", dist: 0.7664, area: 0.2505, dist_flower: 0.3832 }, { name: "coleus5", dist: 0.8727, area: 0.2394, dist_flower: 0.4499 }, { name: "coleus6", dist: 0.6625, area: 0.1094, dist_flower: 0.3956 }, { name: "coleus7", dist: 0.6415, area: 0.1688, dist_flower: 0.3721 }, { name: "coleus8", dist: 0.9333, area: 0.2255, dist_flower: 0.4833 }, { name: "coleus9", dist: 0.4314, area: 0.0739, dist_flower: 0.3473 }, { name: "coleus10", dist: 0.7689, area: 0.1829, dist_flower: 0.4129 }, { name: "coleus11", dist: 0.8776, area: 0.2169, dist_flower: 0.4104 }, { name: "coleus12", dist: 0.8677, area: 0.3056, dist_flower: 0.4030 }, { name: "coleus13", dist: 0.8665, area: 0.2338, dist_flower: 0.4339 }, { name: "coleus14", dist: 0.8888, area: 0.2680, dist_flower: 0.4166 }, { name: "coleus15", dist: 0.9580, area: 0.3020, dist_flower: 0.4660 }, { name: "coleus16", dist: 0.9208, area: 0.3553, dist_flower: 0.4785 }, { name: "coleus17", dist: 0.7973, area: 0.2133, dist_flower: 0.3880 }, { name: "coleus18", dist: 0.9593, area: 0.2542, dist_flower: 0.4402 }, { name: "coleus19", dist: 0.7314, area: 0.1576, dist_flower: 0.4374 }, { name: "coleus20", dist: 0.5775, area: 0.1167, dist_flower: 0.3743 },],
                // },
                // {
                //     name: "sunflower",
                //     example_area: 0.3872,
                //     frames: ["2019-07-03","2019-07-04","2019-07-05","2019-07-06","2019-07-07","2019-07-08","2019-07-11","2019-07-13","2019-07-14","2019-07-15","2019-07-17","2019-07-19","2019-07-21","2019-07-23","2019-07-27","2019-07-29","2019-07-31","2019-08-02","2019-08-04","2019-08-06","2019-08-08","2019-08-10","2019-08-12","2019-08-14","2019-08-16","2019-08-18"],
                //     videos: [{ name: "sunflower1", dist: 0.8627, area: 0.4547, dist_flower: 0.6841 }, { name: "sunflower2", dist: 0.9643, area: 0.3474, dist_flower: 0.6923 }, { name: "sunflower3", dist: 0.8681, area: 0.2803, dist_flower: 0.6814 }, { name: "sunflower4", dist: 0.9176, area: 0.3413, dist_flower: 0.7775 }, { name: "sunflower5", dist: 0.9150, area: 0.3709, dist_flower: 0.7392 }, { name: "sunflower6", dist: 0.9260, area: 0.3811, dist_flower: 0.6980 }, { name: "sunflower7", dist: 0.9095, area: 0.3148, dist_flower: 0.6925 }, { name: "sunflower8", dist: 0.8793, area: 0.3184, dist_flower: 0.6925 }, { name: "sunflower9", dist: 0.8959, area: 0.2975, dist_flower: 0.7338 }, { name: "sunflower10", dist: 0.9481, area: 0.3363, dist_flower: 0.7448 }, { name: "sunflower11", dist: 0.8959, area: 0.3302, dist_flower: 0.6597 }, { name: "sunflower12", dist: 0.9508, area: 0.3536, dist_flower: 0.6459 }, { name: "sunflower13", dist: 0.9482, area: 0.3730, dist_flower: 0.6763 }, { name: "sunflower14", dist: 0.8576, area: 0.3106, dist_flower: 0.6928 }, { name: "sunflower15", dist: 0.9262, area: 0.3970, dist_flower: 0.6928 }, { name: "sunflower16", dist: 0.8576, area: 0.2957, dist_flower: 0.5527 }, { name: "sunflower17", dist: 0.9703, area: 0.3346, dist_flower: 0.7863 }, { name: "sunflower18", dist: 0.8852, area: 0.4127, dist_flower: 0.6544 }, { name: "sunflower19", dist: 0.8220, area: 0.3461, dist_flower: 0.5585 }, { name: "sunflower20", dist: 0.8467, area: 0.3595, dist_flower: 0.7368 },],
                // },
                {
                    name: "canna",
                    frames: ["2019-07-03","2019-07-04","2019-07-05","2019-07-06","2019-07-07","2019-07-08","2019-07-11","2019-07-13","2019-07-14","2019-07-15","2019-07-17","2019-07-19","2019-07-21","2019-07-23","2019-07-25","2019-07-27","2019-07-29","2019-07-31","2019-08-02","2019-08-04","2019-08-06","2019-08-08","2019-08-10","2019-08-12","2019-08-14","2019-08-16","2019-08-18","2019-08-20","2019-08-22","2019-08-24","2019-08-26","2019-08-28","2019-08-30","2019-09-01","2019-09-03"],
                    example_area: 51688,
                    videos: [{ name: "canna1", dist: 0.7095, area: 51585, dist_flower: 0.6823 }, { name: "canna2", dist: 0.7169, area: 56976, dist_flower: 0.6452 }, { name: "canna3", dist: 0.6848, area: 41225, dist_flower: 0.5587 }, { name: "canna4", dist: 0.6774, area: 42310, dist_flower: 0.6007 }, { name: "canna5", dist: 0.7342, area: 37509, dist_flower: 0.6502 }, { name: "canna6", dist: 0.7441, area: 35876, dist_flower: 0.6749 }, { name: "canna7", dist: 0.7540, area: 51688, dist_flower: 0.6098 }, { name: "canna8", dist: 0.7787, area: 56990, dist_flower: 0.6593 }, { name: "canna9", dist: 0.7095, area: 52120, dist_flower: 0.6483 }, { name: "canna10", dist: 0.6749, area: 39698, dist_flower: 0.5686 }, { name: "canna11", dist: 0.7886, area: 63294, dist_flower: 0.6675 }, { name: "canna12", dist: 0.7738, area: 52618, dist_flower: 0.6977 }, { name: "canna13", dist: 0.8183, area: 56300, dist_flower: 0.6785 }, { name: "canna14", dist: 0.8282, area: 54411, dist_flower: 0.6895 }, { name: "canna15", dist: 0.8158, area: 63096, dist_flower: 0.6977 }, { name: "canna16", dist: 0.7244, area: 42188, dist_flower: 0.5768 }, { name: "canna17", dist: 0.6131, area: 54191, dist_flower: 0.5356 }, { name: "canna18", dist: 0.6774, area: 38002, dist_flower: 0.5768 }, { name: "canna19", dist: 0.6947, area: 48314, dist_flower: 0.5411 }, { name: "canna20", dist: 0.7664, area: 72916, dist_flower: 0.6098 },],
                },
                {
                    name: "coleus",
                    example_area: 35681,
                    frames: ["2019-07-13","2019-07-14","2019-07-15","2019-07-17","2019-07-19","2019-07-21","2019-07-23","2019-07-27","2019-08-02","2019-08-04","2019-08-06","2019-08-08","2019-08-10","2019-08-12","2019-08-16","2019-08-18","2019-08-20","2019-08-22","2019-08-24","2019-08-26","2019-08-28","2019-08-30","2019-09-01","2019-09-03"],
                    videos: [{ name: "coleus1", dist: 0.8269, area: 40284, dist_flower: 0.4289 }, { name: "coleus2", dist: 0.8195, area: 33259, dist_flower: 0.4017 }, { name: "coleus3", dist: 0.7874, area: 34702, dist_flower: 0.4462 }, { name: "coleus4", dist: 0.7664, area: 37211, dist_flower: 0.3832 }, { name: "coleus5", dist: 0.8727, area: 39320, dist_flower: 0.4499 }, { name: "coleus6", dist: 0.6625, area: 24648, dist_flower: 0.3956 }, { name: "coleus7", dist: 0.6415, area: 28438, dist_flower: 0.3721 }, { name: "coleus8", dist: 0.9333, area: 40692, dist_flower: 0.4833 }, { name: "coleus9", dist: 0.4314, area: 17889, dist_flower: 0.3473 }, { name: "coleus10", dist: 0.7689, area: 32667, dist_flower: 0.4129 }, { name: "coleus11", dist: 0.8776, area: 35681, dist_flower: 0.4104 }, { name: "coleus12", dist: 0.8677, area: 42291, dist_flower: 0.4030 }, { name: "coleus13", dist: 0.8665, area: 36493, dist_flower: 0.4339 }, { name: "coleus14", dist: 0.8888, area: 40237, dist_flower: 0.4166 }, { name: "coleus15", dist: 0.9580, area: 42664, dist_flower: 0.4660 }, { name: "coleus16", dist: 0.9208, area: 49000, dist_flower: 0.4785 }, { name: "coleus17", dist: 0.7973, area: 31242, dist_flower: 0.3880 }, { name: "coleus18", dist: 0.9593, area: 42305, dist_flower: 0.4402 }, { name: "coleus19", dist: 0.7314, area: 31384, dist_flower: 0.4374 }, { name: "coleus20", dist: 0.5775, area: 22682, dist_flower: 0.3743 },],
                },
                {
                    name: "sunflower",
                    example_area: 48754,
                    frames: ["2019-07-13","2019-07-14","2019-07-15","2019-07-17","2019-07-19","2019-07-21","2019-07-23","2019-07-27","2019-07-29","2019-07-31","2019-08-02","2019-08-04","2019-08-06","2019-08-08","2019-08-10","2019-08-12","2019-08-14","2019-08-16","2019-08-18"],
                    videos: [{ name: "sunflower1", dist: 0.8627, area: 63927, dist_flower: 0.6841 }, { name: "sunflower2", dist: 0.9643, area: 46393, dist_flower: 0.6923 }, { name: "sunflower3", dist: 0.8681, area: 40484, dist_flower: 0.6814 }, { name: "sunflower4", dist: 0.9176, area: 48114, dist_flower: 0.7775 }, { name: "sunflower5", dist: 0.9150, area: 48754, dist_flower: 0.7392 }, { name: "sunflower6", dist: 0.9260, area: 49697, dist_flower: 0.6980 }, { name: "sunflower7", dist: 0.9095, area: 44926, dist_flower: 0.6925 }, { name: "sunflower8", dist: 0.8793, area: 45950, dist_flower: 0.6925 }, { name: "sunflower9", dist: 0.8959, area: 44967, dist_flower: 0.7338 }, { name: "sunflower10", dist: 0.9481, area: 45003, dist_flower: 0.7448 }, { name: "sunflower11", dist: 0.8959, area: 49397, dist_flower: 0.6597 }, { name: "sunflower12", dist: 0.9508, area: 49671, dist_flower: 0.6459 }, { name: "sunflower13", dist: 0.9482, area: 52839, dist_flower: 0.6763 }, { name: "sunflower14", dist: 0.8576, area: 48962, dist_flower: 0.6928 }, { name: "sunflower15", dist: 0.9262, area: 53112, dist_flower: 0.6928 }, { name: "sunflower16", dist: 0.8576, area: 44782, dist_flower: 0.5527 }, { name: "sunflower17", dist: 0.9703, area: 60070, dist_flower: 0.7863 }, { name: "sunflower18", dist: 0.8852, area: 53103, dist_flower: 0.6544 }, { name: "sunflower19", dist: 0.8220, area: 42251, dist_flower: 0.5585 }, { name: "sunflower20", dist: 0.8467, area: 55085, dist_flower: 0.7368 },],
                },
                // Kept creating issues so removing for now...
                // {
                //     name: "maize",
                //     frames: ["Day_001","Day_002","Day_003","Day_004","Day_005","Day_006","Day_007","Day_008","Day_009","Day_010","Day_011","Day_012","Day_013","Day_014","Day_015","Day_016","Day_017","Day_018","Day_019","Day_020","Day_021","Day_022","Day_023","Day_024","Day_025","Day_026","Day_027"],
                //     videos: [{ name: "maize1", dist: 0.5785, area: 0.1516 }, { name: "maize2", dist: 0.5661, area: 0.3517 }, { name: "maize3", dist: 0.6032, area: 0.2272 }, { name: "maize4", dist: 0.2423, area: 0.0489 }, { name: "maize5", dist: 0.6428, area: 0.3070 }, { name: "maize6", dist: 0.6551, area: 0.3599 }, { name: "maize7", dist: 0.5290, area: 0.2496 }, { name: "maize8", dist: 0.6082, area: 0.4073 }, { name: "maize9", dist: 0.6650, area: 0.3563 }, { name: "maize10", dist: 0.5192, area: 0.2701 }, { name: "maize11", dist: 0.5785, area: 0.0674 }, { name: "maize12", dist: 0.5538, area: 0.2075 }, { name: "maize13", dist: 0.5192, area: 0.3709 },],
                // },
            ],
        },
        seaice: {
            path: "{{url_for('my_task.static', filename = 'assets/seaice')}}",
            categories: [
                {
                    name: "northpole",
                    frames: 365,
                    example_area: 9305,
                    videos: [{ name: "1979", area: 9703 }, { name: "1980", area: 10519 }, { name: "1981", area: 9492 }, { name: "1982", area: 9918 }, { name: "1983", area: 10166 }, { name: "1984", area: 8775 }, { name: "1985", area: 8970 }, { name: "1986", area: 9958 }, { name: "1987", area: 11389 }, { name: "1989", area: 10987 }, { name: "1990", area: 9739 }, { name: "1991", area: 10212 }, { name: "1992", area: 11380 }, { name: "1993", area: 9958 }, { name: "1994", area: 11343 }, { name: "1995", area: 9569 }, { name: "1996", area: 11525 }, { name: "1997", area: 10397 }, { name: "1998", area: 10277 }, { name: "1999", area: 9305 }, { name: "2000", area: 9597 }, { name: "2001", area: 10469 }, { name: "2002", area: 8853 }, { name: "2003", area: 9547 }, { name: "2004", area: 9007 }, { name: "2005", area: 8765 }, { name: "2006", area: 9354 }, { name: "2007", area: 6749 }, { name: "2008", area: 7369 }, { name: "2009", area: 8197 }, { name: "2010", area: 7818 }, { name: "2011", area: 7249 }, { name: "2012", area: 5715 }, { name: "2013", area: 8241 }, { name: "2014", area: 8281 }, { name: "2015", area: 7446 }, { name: "2016", area: 6971 }, { name: "2017", area: 7688 }, { name: "2018", area: 7690 }, { name: "2019", area: 7042 }, { name: "2020", area: 6301 }, { name: "2021", area: 7869 }, { name: "2022", area: 7817 },],
                },
                {
                    name: "southpole",
                    frames: 365,
                    example_area: 31537,
                    videos: [{ name: "1980", area: 31684 }, { name: "1981", area: 31300 }, { name: "1982", area: 30848 }, { name: "1983", area: 31596 }, { name: "1984", area: 30895 }, { name: "1985", area: 31892 }, { name: "1986", area: 29731 }, { name: "1987", area: 31560 }, { name: "1989", area: 30899 }, { name: "1990", area: 30608 }, { name: "1991", area: 31236 }, { name: "1992", area: 31552 }, { name: "1993", area: 31411 }, { name: "1994", area: 31537 }, { name: "1995", area: 31250 }, { name: "1996", area: 31942 }, { name: "1997", area: 31626 }, { name: "1998", area: 32172 }, { name: "1999", area: 31689 }, { name: "2000", area: 32341 }, { name: "2001", area: 30981 }, { name: "2002", area: 30477 }, { name: "2003", area: 31055 }, { name: "2004", area: 32151 }, { name: "2005", area: 32209 }, { name: "2006", area: 32186 }, { name: "2007", area: 32129 }, { name: "2008", area: 30592 }, { name: "2009", area: 31866 }, { name: "2010", area: 31877 }, { name: "2011", area: 31467 }, { name: "2012", area: 32579 }, { name: "2013", area: 32612 }, { name: "2014", area: 33359 }, { name: "2015", area: 31137 }, { name: "2016", area: 30394 }, { name: "2017", area: 30429 }, { name: "2018", area: 29740 }, { name: "2019", area: 30848 }, { name: "2020", area: 31934 }, { name: "2021", area: 31533 }, { name: "2022", area: 30688 },],
                },
            ]
        },
    }

    let tutorialChecklists = {
        smallMultiples: [
            "! Welcome to the Small Multiples tutorial. First, zoom in by holding control and pressing plus.",
            "! Now, zoom out by holding control and pressing minus.",
            "! Now, drag the scrollbar to play through the entire video.",
            "! Now, press spacebar to play through the video automatically.",
            "! Select a video by holding control and clicking on it.",
            "! If at any time you forget one of the features, click on the help button to the left of the scrollbar.",
        ],
        overlays: [
            "! Welcome to the Overlays tutorial. Click on each video to add them to the overlay on the right.",
            "! The number indicates position in the overlay. Now, drag the scrollbar to play through the overlaid videos.",
            "! Now, click on the videos again to remove them from the overlay.",
        ],
        shadowMarkers: [
            "! Welcome to the Shadow Markers tutorial. Add a shadow marker to each video by clicking on any of the videos.",
            "! Change the shape of the mark in the top menu to the right of the scrollbar.",
            "! Change the colour of the mark in the bottom menu to the right of the scrollbar.",
            "! Now, select the freeform mark (squiggly line in the shape menu).",
            "! Draw a shape on the video by clicking and dragging.",
            "! While in freeform mode, press shift to switch to straight line freeform mode.",
            "! Delete a shadow marker by hovering over it and pressing delete.",
            "! Toggle the shadow grid by holding control and pressing g and hover over a video.",
            "! Toggle the shadow cursor by holding control and pressing c and hover over a video."
        ],
    }
</script>
<script src="/my_task/canvas.js"></script>

<main></main>